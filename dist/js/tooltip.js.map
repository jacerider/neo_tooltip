{"version":3,"file":"tooltip.js","sources":["../../src/js/tooltip.ts"],"sourcesContent":["(function (Drupal, drupalSettings, once) {\n\n  const loadAnimationStyle = function (animation:string) {\n    let stylesheet:HTMLLinkElement|null = document.querySelector(`link[neo-tooltip-animation-${animation}]`);\n    if (!stylesheet) {\n      stylesheet = document.createElement('link');\n      stylesheet.rel = 'stylesheet';\n      stylesheet.type = 'text/css';\n      stylesheet.media = 'screen';\n      stylesheet.href = '/' + drupalSettings.neoTooltip.dir + `/dist/css/tippy-${animation}.css`;\n      stylesheet.setAttribute(`neo-tooltip-animation-${animation}`, '');\n      document.getElementsByTagName('head')[0].appendChild(stylesheet);\n    }\n  }\n\n  Drupal.behaviors.neoTooltip = {\n    attach: (context:HTMLElement) => {\n      if (typeof drupalSettings.neoTooltip === 'undefined') {\n        return;\n      }\n      once('neo.tooltip', '.use-neo-tooltip', context).forEach(el => {\n        const options:any = Object.assign({}, {\n          theme: 'neo',\n          inertia: true,\n        }, drupalSettings.neoTooltip);\n        const animation = el.getAttribute('data-tippy-animation') || options.animation;\n        if (animation && ['shift-toward', 'shift-away', 'scale', 'perspective'].includes(animation)) {\n          loadAnimationStyle(animation);\n        }\n        const triggerToNearest = el.getAttribute('data-tippy-trigger-nearest');\n        if (triggerToNearest) {\n          const closest = el.closest('a, input, button');\n          if (closest) {\n            options.triggerTarget = closest;\n          }\n          else {\n            const closestFormElements = [];\n            const closestFormElementWrapper = el.closest('.form-item');\n            if (closestFormElementWrapper) {\n              closestFormElements.push(closestFormElementWrapper.querySelector('input'));\n              closestFormElements.push(closestFormElementWrapper.querySelector('label'));\n            }\n            if (closestFormElements.length) {\n              options.triggerTarget = closestFormElements;\n            }\n          }\n        }\n        const isTemplate = el.getAttribute('data-tippy-template');\n        if (isTemplate) {\n          options['allowHTML'] = true;\n          options['content'] = (ref:HTMLElement) => {\n            let template = ref.nextElementSibling;\n            if (template && template.tagName === 'TEMPLATE') {\n              return template.innerHTML;\n            }\n            template = ref.querySelector('.neo-tooltip-template');\n            if (template && template.tagName === 'TEMPLATE') {\n              return template.innerHTML;\n            }\n            return '';\n          };\n        }\n        tippy(el, options);\n      });\n    }\n  };\n\n})(Drupal, drupalSettings, once);\n\nexport {};\n"],"names":["Drupal","drupalSettings","once","loadAnimationStyle","animation","stylesheet","context","el","options","closest","closestFormElements","closestFormElementWrapper","ref","template"],"mappings":"CAAC,SAAUA,GAAQC,GAAgBC,GAAM;AAEjC,QAAAC,IAAqB,SAAUC,GAAkB;AACrD,QAAIC,IAAkC,SAAS,cAAc,8BAA8BD,CAAS,GAAG;AACvG,IAAKC,MACUA,IAAA,SAAS,cAAc,MAAM,GAC1CA,EAAW,MAAM,cACjBA,EAAW,OAAO,YAClBA,EAAW,QAAQ,UACnBA,EAAW,OAAO,MAAMJ,EAAe,WAAW,MAAM,mBAAmBG,CAAS,QACpFC,EAAW,aAAa,yBAAyBD,CAAS,IAAI,EAAE,GAChE,SAAS,qBAAqB,MAAM,EAAE,CAAC,EAAE,YAAYC,CAAU;AAAA,EACjE;AAGFL,EAAAA,EAAO,UAAU,aAAa;AAAA,IAC5B,QAAQ,CAACM,MAAwB;AAC3B,MAAA,OAAOL,EAAe,aAAe,OAGzCC,EAAK,eAAe,oBAAoBI,CAAO,EAAE,QAAQ,CAAMC,MAAA;AAC7D,cAAMC,IAAc,OAAO,OAAO,IAAI;AAAA,UACpC,OAAO;AAAA,UACP,SAAS;AAAA,QAAA,GACRP,EAAe,UAAU,GACtBG,IAAYG,EAAG,aAAa,sBAAsB,KAAKC,EAAQ;AAKrE,YAJIJ,KAAa,CAAC,gBAAgB,cAAc,SAAS,aAAa,EAAE,SAASA,CAAS,KACxFD,EAAmBC,CAAS,GAELG,EAAG,aAAa,4BAA4B,GAC/C;AACd,gBAAAE,IAAUF,EAAG,QAAQ,kBAAkB;AAC7C,cAAIE;AACF,YAAAD,EAAQ,gBAAgBC;AAAA,eAErB;AACH,kBAAMC,IAAsB,CAAA,GACtBC,IAA4BJ,EAAG,QAAQ,YAAY;AACzD,YAAII,MACFD,EAAoB,KAAKC,EAA0B,cAAc,OAAO,CAAC,GACzED,EAAoB,KAAKC,EAA0B,cAAc,OAAO,CAAC,IAEvED,EAAoB,WACtBF,EAAQ,gBAAgBE;AAAA,UAE5B;AAAA,QACF;AAEA,QADmBH,EAAG,aAAa,qBAAqB,MAEtDC,EAAQ,YAAe,IACfA,EAAA,UAAa,CAACI,MAAoB;AACxC,cAAIC,IAAWD,EAAI;AAKf,iBAJAC,KAAYA,EAAS,YAAY,eAG1BA,IAAAD,EAAI,cAAc,uBAAuB,GAChDC,KAAYA,EAAS,YAAY,cAC5BA,EAAS,YAEX;AAAA,QAAA,IAGX,MAAMN,GAAIC,CAAO;AAAA,MAAA,CAClB;AAAA,IACH;AAAA,EAAA;AAGJ,GAAG,QAAQ,gBAAgB,IAAI;"}